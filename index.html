<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>とも & かしこの顔文字追いかけっこ</title>
<style>
  body { font-family:sans-serif; text-align:center; background:#f0f0f0; margin:0; padding:0; overflow-x:hidden;}
  header { background:#8ecae6; color:white; padding:20px;}
  #face-selection { display:flex; overflow-x:auto; padding:10px; gap:5px; margin:10px 0; }
  .face { font-size:2em; padding:5px 10px; cursor:pointer; border:2px solid transparent; flex:0 0 auto; }
  .face.selected { border-color:#ff0000; border-radius:5px; background:#fff;}
  .race { position:relative; width:100%; height:100px; background:#e0f7fa; overflow:hidden; margin:20px 0;}
  .runner { position:absolute; bottom:10px; font-size:2em; }
  button { padding:10px 20px; font-size:1em; cursor:pointer; }
</style>
</head>
<body>

<header><h1>とも & かしこの顔文字追いかけっこ</h1></header>

<!-- 横スクロール顔選択 -->
<div id="face-selection"></div>
<button id="go-btn">GO!</button>

<!-- レース -->
<div class="race">
  <div class="runner" id="tomo-runner"></div>
  <div class="runner" id="kashiko-runner"></div>
</div>

<script>
// 顔文字100個（カテゴリ別に10個ずつ簡易サンプル）
const faces = [];
const categories = ["😊","😢","😎","😡","😱","😂","😍","😴","🤔","😇"];
for(let i=0;i<10;i++){
  categories.forEach(cat=>{
    faces.push(cat + ""); // 各カテゴリ10個で合計100個
  });
}

const selectionDiv = document.getElementById('face-selection');
let selectedFace = 0;

// 顔表示
faces.forEach((f,i)=>{
  const div = document.createElement('div');
  div.classList.add('face');
  div.textContent = f;
  div.dataset.index = i;
  div.addEventListener('click', ()=>{
    document.querySelectorAll('.face').forEach(e=>e.classList.remove('selected'));
    div.classList.add('selected');
    selectedFace = i;
  });
  selectionDiv.appendChild(div);
});

// ランナー初期化
const tomoRunner = document.getElementById('tomo-runner');
const kashikoRunner = document.getElementById('kashiko-runner');
tomoRunner.textContent = faces[0];
kashikoRunner.textContent = faces[50]; // 適当に相手カテゴリ

// 追いかけっこ
let posTomo = 0;
let posKashiko = 5;
let running = false;

function race(){
  if(!running) return;
  posTomo += 0.7 + Math.random()*0.5;
  posKashiko += 0.65 + Math.random()*0.6;

  if(posTomo>100) posTomo=0;
  if(posKashiko>100) posKashiko=5;

  tomoRunner.style.left = posTomo+'%';
  kashikoRunner.style.left = posKashiko+'%';

  // 顔切替（追いつき感）
  if(Math.abs(posTomo-posKashiko)<5){
    tomoRunner.textContent = faces[selectedFace];
    kashikoRunner.textContent = faces[(selectedFace+50)%faces.length];
  }else{
    tomoRunner.textContent = faces[(selectedFace+1)%10 + Math.floor(selectedFace/10)*10];
    kashikoRunner.textContent = faces[(selectedFace+51)%faces.length];
  }

  requestAnimationFrame(race);
}

// GOボタン
document.getElementById('go-btn').addEventListener('click',()=>{ running = true; });
</script>

</body>
</html>
