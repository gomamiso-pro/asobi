<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Webåˆ¶ä½œæ”¯æ´ãƒ„ãƒ¼ãƒ«ï¼ˆV115 ä¿®æ­£ç‰ˆï¼‰</title>

<!-- Google Fonts & Bootstrap -->
<link href="https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;700;900&display=swap" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="style.css" />

</head>
<body>

<div class="header-content">
  <h1>Webåˆ¶ä½œ è¨­è¨ˆæ”¯æ´ãƒ„ãƒ¼ãƒ«</h1>
  <button id="qrCodeButton" class="qr-button" title="ãƒ„ãƒ¼ãƒ«ã®QRã‚³ãƒ¼ãƒ‰ã‚’è¡¨ç¤º">ğŸŒ</button>
</div>

<!-- ï¼ˆä¸­ç•¥ï¼šâ‘ ã€œâ‘£ã¯ãã®ã¾ã¾ä¿æŒï¼‰ -->
<!-- ã‚ãªãŸã®ãƒ’ã‚¢ãƒªãƒ³ã‚°ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚„AIæŒ‡ç¤ºæ–‡éƒ¨åˆ†ã¯çœç•¥å¯èƒ½ã€‚ã“ã“ã§ã¯â‘¤ã‚’ä¿®æ­£ç‰ˆã«ã—ã¦æ²è¼‰ã€‚ -->

<section id="pagePreviewSection">
  <h2>â‘¤ ãƒ‡ã‚¶ã‚¤ãƒ³ã‚¤ãƒ¡ãƒ¼ã‚¸ / AIç”ŸæˆWebãƒšãƒ¼ã‚¸HTMLãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</h2>
  <p class="hint">â¬†ï¸ãƒ‡ã‚¶ã‚¤ãƒ³è¨­å®šã®å¤‰æ›´ã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã«ã‚¤ãƒ¡ãƒ¼ã‚¸ãŒæ›´æ–°ã•ã‚Œã¾ã™ã€‚</p>

  <div id="dynamicPreviewArea" class="card p-3 shadow-sm" style="min-height: 450px;">
    <iframe id="pagePreview" style="width:100%; height:420px; border:1px solid #ccc; border-radius:8px;"></iframe>
  </div>

  <textarea id="aiPageHtmlInput" rows="10" placeholder="AIãŒç”Ÿæˆã—ãŸHTMLã‚³ãƒ¼ãƒ‰ã‚’ã“ã“ã«è²¼ã‚Šä»˜ã‘"></textarea>
  <div class="pagecode-actions">
      <button id="previewAiPageBtn" onclick="previewAiPageHtml()">AIã‚³ãƒ¼ãƒ‰ã‚’ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</button>
      <button onclick="clearPagePreview()">ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ã‚¯ãƒªã‚¢</button>
  </div>
</section>

<footer style="text-align:center; margin:18px 0 60px 0;">
  <small>ãƒ„ãƒ¼ãƒ«æä¾› â€” Webåˆ¶ä½œã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆï¼ˆç°¡æ˜“ç‰ˆï¼‰</small>
</footer>

<!-- QRã‚³ãƒ¼ãƒ‰ç”Ÿæˆç”¨ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div class="modal fade" id="qrModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content text-center p-3">
      <h5>ãƒ„ãƒ¼ãƒ«ã®QRã‚³ãƒ¼ãƒ‰</h5>
      <div id="qrContainer" class="my-3"></div>
      <p><a href="https://gomamiso-pro.github.io/asobi/" target="_blank">https://gomamiso-pro.github.io/asobi/</a></p>
      <button type="button" class="btn btn-secondary mt-2" data-bs-dismiss="modal">é–‰ã˜ã‚‹</button>
    </div>
  </div>
</div>

<!-- ãƒ©ã‚¤ãƒ–ãƒ©ãƒªèª­ã¿è¾¼ã¿ -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<script src="script.js"></script>

<script>
/* =============================
   QRã‚³ãƒ¼ãƒ‰ãƒœã‚¿ãƒ³å‡¦ç†
============================= */
document.addEventListener('DOMContentLoaded', function() {
  const qrButton = document.getElementById('qrCodeButton');
  const qrContainer = document.getElementById('qrContainer');
  const qrModal = new bootstrap.Modal(document.getElementById('qrModal'));

  qrButton.addEventListener('click', () => {
    qrContainer.innerHTML = ''; // ä¸€åº¦ã‚¯ãƒªã‚¢
    new QRCode(qrContainer, {
      text: "https://gomamiso-pro.github.io/asobi/",
      width: 180,
      height: 180
    });
    qrModal.show();
  });
});

/* =============================
   â‘¤ ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼å‡¦ç†
============================= */
function updateDesignPreview() {
  const font = document.getElementById('mainFontSelect')?.value || "'M PLUS Rounded 1c', sans-serif";
  const color = document.getElementById('themeColorSelect')?.value || "#007bff";
  const layout = document.getElementById('layoutPatternSelect')?.value || "full-hero";
  const shape = document.getElementById('buttonShapeSelect')?.value || "medium-round";

  const css = `
    body { font-family: ${font}; background: #fff; color:#333; margin:0; padding:20px; }
    .header { background:${color}; color:white; text-align:center; padding:15px; border-radius:12px; }
    .button { background:${color}; color:white; border:none; border-radius:${shape==='pill'?'50px':shape==='square'?'4px':'10px'}; padding:10px 20px; cursor:pointer; }
  `;
  const html = `
    <!DOCTYPE html><html><head><style>${css}</style></head><body>
    <div class="header"><h1>ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼š${layout}</h1></div>
    <div style="text-align:center; margin-top:40px;">
      <p>ãƒ†ãƒ¼ãƒã‚«ãƒ©ãƒ¼: ${color}</p>
      <p>ãƒ•ã‚©ãƒ³ãƒˆ: ${font}</p>
      <button class="button">ã‚µãƒ³ãƒ—ãƒ«ãƒœã‚¿ãƒ³</button>
    </div>
    </body></html>
  `;
  document.getElementById('pagePreview').srcdoc = html;
}

function previewAiPageHtml() {
  const html = document.getElementById('aiPageHtmlInput').value;
  document.getElementById('pagePreview').srcdoc = html;
}

function clearPagePreview() {
  document.getElementById('aiPageHtmlInput').value = '';
  updateDesignPreview();
}

// ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰æ™‚åˆæœŸåŒ–
window.addEventListener('load', updateDesignPreview);
</script>
</body>
</html>
