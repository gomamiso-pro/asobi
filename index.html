<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Web設計ヒアリングシート</title>
<style>
  body { font-family: 'Noto Sans JP', sans-serif; background: #fafafa; margin:0; padding:10px; color:#222; }
  h1 { text-align:center; margin-bottom:20px; }
  section { background:#fff; padding:15px; border-radius:10px; margin-top:10px; box-shadow:0 2px 6px rgba(0,0,0,0.05); }
  label { display:block; margin-top:10px; font-weight:700; }
  select, textarea { width:100%; padding:8px; margin-top:5px; border-radius:6px; border:1px solid #ccc; font-size:0.9rem; }
  input[type=checkbox] { margin-right:6px; }
  button { margin-top:15px; width:100%; padding:12px; border:none; border-radius:8px; background:#333; color:white; font-size:1rem; cursor:pointer; }
  button:hover { background:#555; }
  pre { background:#f0f0f0; padding:10px; border-radius:6px; margin-top:10px; white-space:pre-wrap; word-break:break-word; }
</style>
</head>
<body>

<h1>Web設計ヒアリングシート</h1>

<section>
  <label>ヒアリング項目を選択してください</label>
  <label><input type="checkbox" class="mainItem" value="projectOverview"> プロジェクト概要</label>
  <label><input type="checkbox" class="mainItem" value="pageType"> ページ分類</label>
  <label><input type="checkbox" class="mainItem" value="pagePurpose"> 各ページの目的と機能</label>
  <label><input type="checkbox" class="mainItem" value="userTarget"> ユーザー層・想定デバイス</label>
  <label><input type="checkbox" class="mainItem" value="design"> デザイン方針</label>
  <label><input type="checkbox" class="mainItem" value="dataRequirement"> データ・連携・管理要件</label>
  <label><input type="checkbox" class="mainItem" value="operation"> 運用・更新方法</label>
  <label><input type="checkbox" class="mainItem" value="security"> 公開・セキュリティ・拡張性</label>
</section>

<section id="detailsSection"></section>

<button onclick="generateJSON()">設計書生成</button>

<h2>生成結果（JSON形式）</h2>
<pre id="jsonOutput">{}</pre>

<script>
const detailsSection = document.getElementById('detailsSection');

const detailOptions = {
  pageType: ["コーポレート／ブランド","EC・販売サイト","メディア・ブログ","業務システム","LP・キャンペーン","ポータル・コミュニティ","おまかせ"],
  design: ["シンプル＆ミニマル","ビジネス＆信頼重視","ポップ＆カジュアル","高級・スタイリッシュ","自然・ナチュラル","おまかせ"],
  userTarget: ["一般ユーザー（20〜40代）","BtoB企業","管理者／社内利用","学生／若年層","高齢層中心","おまかせ"]
};

function createDetailSelect(id, label, options) {
  const wrapper = document.createElement('div');
  const lbl = document.createElement('label');
  lbl.textContent = label;
  const sel = document.createElement('select');
  sel.id = id;
  options.forEach(opt => {
    const o = document.createElement('option');
    o.value = opt;
    o.textContent = opt;
    sel.appendChild(o);
  });
  wrapper.appendChild(lbl);
  wrapper.appendChild(sel);
  detailsSection.appendChild(wrapper);
}

function createDetailTextarea(id, label) {
  const wrapper = document.createElement('div');
  const lbl = document.createElement('label');
  lbl.textContent = label;
  const ta = document.createElement('textarea');
  ta.id = id;
  ta.placeholder = "任意で入力してください。未入力の場合はおまかせ";
  wrapper.appendChild(lbl);
  wrapper.appendChild(ta);
  detailsSection.appendChild(wrapper);
}

function updateDetails() {
  detailsSection.innerHTML = '';
  document.querySelectorAll('.mainItem').forEach(cb => {
    if(cb.checked) {
      switch(cb.value){
        case 'projectOverview':
          createDetailTextarea('projectOverviewInput', 'プロジェクト概要（任意）');
          break;
        case 'pageType':
          createDetailSelect('pageTypeSelect', 'ページ分類', detailOptions.pageType);
          break;
        case 'pagePurpose':
          createDetailTextarea('pagePurposeInput', '各ページの目的と機能');
          break;
        case 'userTarget':
          createDetailSelect('userTargetSelect', 'ユーザー層・想定デバイス', detailOptions.userTarget);
          break;
        case 'design':
          createDetailSelect('designSelect', 'デザイン方針', detailOptions.design);
          break;
        case 'dataRequirement':
          createDetailTextarea('dataRequirementInput', 'データ・連携・管理要件');
          break;
        case 'operation':
          createDetailTextarea('operationInput', '運用・更新方法');
          break;
        case 'security':
          createDetailTextarea('securityInput', '公開・セキュリティ・拡張性');
          break;
      }
    }
  });
}

document.querySelectorAll('.mainItem').forEach(cb=>{
  cb.addEventListener('change', updateDetails);
});

function generateJSON() {
  const result = {};
  document.querySelectorAll('.mainItem').forEach(cb=>{
    if(cb.checked){
      switch(cb.value){
        case 'projectOverview':
          result.projectOverview = document.getElementById('projectOverviewInput').value || "おまかせ";
          break;
        case 'pageType':
          result.pageType = document.getElementById('pageTypeSelect').value;
          break;
        case 'pagePurpose':
          result.pagePurpose = document.getElementById('pagePurposeInput').value || "おまかせ";
          break;
        case 'userTarget':
          result.userTarget = document.getElementById('userTargetSelect').value;
          break;
        case 'design':
          result.design = document.getElementById('designSelect').value;
          break;
        case 'dataRequirement':
          result.dataRequirement = document.getElementById('dataRequirementInput').value || "おまかせ";
          break;
        case 'operation':
          result.operation = document.getElementById('operationInput').value || "おまかせ";
          break;
        case 'security':
          result.security = document.getElementById('securityInput').value || "おまかせ";
          break;
      }
    }
  });
  document.getElementById('jsonOutput').textContent = JSON.stringify(result, null, 2);
}
</script>

</body>
</html>
